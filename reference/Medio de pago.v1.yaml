openapi: 3.0.0
info:
  title: Medios de pago
  version: '1.0'
  description: |-
    Este Webservice y su arquitectura permiten que cualquier aplicativo sin importar el lenguaje de desarrollo, puedan beneficiarse de un conjunto de reglas de negocio y servicios, debido al cumplimiento de estándares SOAP, WSDL y XML.

    Para hacer uso de los Webservice, debe contar con un lenguaje de programación que pueda consumirlos, algunos lenguajes tienen mejor soporte que otros desde el punto de vista de facilidad de acceso; sin embargo, si no se cuenta con un lenguaje que encapsule la comunicación, siempre se puede hacer incluso a nivel de sockets usando el protocolo HTTP conjuntamente con la especificación SOAP.

    Para aquellos lenguajes que tienen un buen soporte lo más aconsejable es ir a través del WSDL para el Webservice.

    La integración directa al medio de pago en general NO es recomendada, pues dificulta otros servicios que pueden estar implementados en la interfaz de Placetopay, al tiempo que hace que cada nuevo medio de pago liberado requiera un nuevo desarrollo por parte del comercio. Así que solo tener en cuenta esta integración si:

    * Completa flujo de transacción no disponible por redirección.
    * Usa el servicio a modo de marca blanca.

    Como cualquier proceso de integración, este requerirá una certificación del personal de soporte de Placetopay para revisar temas de funcionamiento, mejores prácticas y usabilidad.

    **¿Qué obligaciones tengo al usar esta integración?**

    Ten en cuenta que al usar este tipo de integración, se requiere de certificación y los tiempos de implementación pueden ser mucho más altos que cuando se integra por `WebCheckOut`.

    **Captura de la información**

    Al consumir el servicio de creación de la transacción, tu aplicación debe proveer información sobre el pagador, el comprador y la transacción. Si corresponden a la misma persona, solamente deberás especificar la información del pagador.

    Para proveer estos datos, tu aplicación deberá capturarlos directamente en el proceso o de alguna fuente de información previamente habilitada.

    `Recomendamos tener un certificado digital SSL para tu sitio.`

    `El lenguaje de preferencia para la integracion debe tener soporte para TLS 1.2 o superior `

    A continuacion se describen los flujos de cada uno de los medios de pago para una mayor comprension

    **Flujo de integración PSE**

    ¿Cómo funciona la implementación?

    * Se muestra como opción de pago PSE (Débitos a cuentas de ahorro y corriente en Colombia).

    * Una vez el usuario la selecciona, se presenta la lista de bancos (debe estar cacheada localmente y su refrescamiento debe ser 1 vez por día) y el tipo de banca a desplegar (personas o empresas).

    * Al tiempo que el cliente confirma la operación, debe consumirse el servicio para realizar la petición de la transacción.

    * Si la petición es exitosa se retorna la URL a la cual debe enviarse al cliente para que realice la operación en el banco. En caso contrario se retorna el motivo del rechazo de la transacción.

    * Almacenar los datos de la transacción retornados por el servicio (identificador de la transacción, autorización/cus, identificador sesión de placetopay).

    * Redirigir el navegador a la URL retornada en caso de éxito.

    * Una vez la transacción retorna a la URL especificada en el consumo de crear transacción, se debe preguntar por el estado de la transacción mediante el consumo un servicio.

    * Dependiendo de la respuesta del servicio, la transacción puede haber sido aprobada, rechazada o seguir pendiente de procesamiento.

    * Informar al usuario el estado de la transacción.

    * Si la transacción está pendiente, o si el cliente al abandonar el portal no ha regresado, se debe tener una sonda que pregunte por el estado de la transacción.


    **Flujo de integración Tuya con tarjeta TUYA O EXITO:**

    ¿Cómo funciona la implementación?

    * Se muestra como opción de pago Tarjeta Éxito y Tarjeta Alkosto (dependerá de si se tiene convenio para cada uno de los medios de pago).
    *Una vez el usuario la selecciona el medio de pago y confirma la operación, debe consumirse el servicio para realizar la petición de la transacción.

    * Si la petición es exitosa se retorna la URL a la cual debe enviarse al cliente para que realice la operación en en medio de pago. En caso contrario se retorna el motivo del rechazo de la transacción.

    * Almacenar los datos de la transacción retornados por el servicio (identificador de la transacción, autorización, identificador sesión de placetopay).
    * Redirigir el navegador a la URL retornada en caso de éxito.

    * Una vez la transacción retorna (retorna a la URL especificada en el consumo del crear transacción), se debe preguntar por el estado de la transacción mediante el consumo un servicio.

    * Dependiendo de la respuesta del servicio, la transacción puede haber sido aprobada, rechazada o seguir pendiente de procesamiento.

    * Informar al usuario el estado de la transacción.

    * Si la transacción está pendiente, o si el cliente al abandonar el portal no ha regresado, se debe tener una sonda que pregunte por el estado de la transacción.

    **Flujo de integración efectivo**

    * El establecimiento invoca el método addOrder para agregar una orden de pago en efectivo.

    * Si se desea eliminar una orden de pago se puede invocar al método deleteOrder, se debe tener en cuenta que la orden no podrá ser eliminada si ya ha sido pagada.

    * Eventualmente se puede invocar al método flushOrders que permite purgar las órdenes de pago que ya están vencidas y que no han sido pagadas.

    * Para obtener el PDF con las instrucciones para pagar la orden de efectivo se debe invocar el método getOrderPDF que retorna un PDF codificado en Base64.

    * Para consultar el estado de una transacción se puede invocar el método getOrder el cual brinda todos los datos de la orden incluyendo el estado y si está pagada la información de la transacción.
servers:
  - url: 'https://test.placetopay.com/soap/'
    description: Modo pruebas
  - url: ' https://test.placetopay.com/'
    description: AIM modo pruebas
  - url: 'https://authe-ptp.herokuapp.com/xml-auth.php'
    description: ENDPOINT Authentication
paths:
  pse/v11:
    post:
      summary: Getbanklist
      operationId: post-pse/v11/?wsdl
      responses:
        '200':
          description: |-
            **Bank[]**. Un arreglo con la lista de bancos habilitados.

            `La respuesta de este servicio debe ser cacheada.`

            `El servicio debe ser consumido una vez por día.`
          content:
            application/soap+xml:
              schema:
                type: object
                properties: {}
          headers: {}
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <getBankList xmlns="https://placetopay.com/soap/pse">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                          </getBankList>
                      </Body>
                  </Envelope>
        description: |-
          Obtiene la lista de bancos disponibles para el establecimiento de comercio en el sistema PSE de ACH Colombia.

          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación (Ir a la sesion de autenticacion para mas detalle)|
      tags:
        - Servicio PSE
      description: |-
        Una vez el cliente ha determinado que desea pagar con débito a una cuenta corriente o de ahorros, deberá presentarle la lista de los bancos que en el momento están disponibles para la transacción. Esta lista de bancos se obtiene mediante el consumo del método `getBankList` el cual debe ser consumido una vez por día, lo que exige que se disponga de un mecanismo de caché que permita recuperar la lista de este si ya ha sido consumido el servicio en el día.

        Adicional al darle  escoger con qué banco realizar la transacción, el usuario también debe indicar qué tipo de interfaz del banco desea desplegar, es decir, si la de personas o la de empresas.

        Si por algún motivo la lista de bancos no pudo ser obtenida, deberá mostrarse un mensaje “No se pudo obtener la lista de Entidades Financieras, por favor intente más tarde” y, consumir nuevamente el servicio de lista de bancos para intentar obtener dicha lista y poderla almacenar en el caché.

        Tenga en cuenta que en operaciones de Multicrédito se debe utilizar el código de servicio para multicrédito y que siempre deberá pasar todas las cuentas dependientes (entidad, servicio) para los créditos así algunas de ellas vayan con valores en cero. Es requerido que la lista de créditos corresponda con todos los subcódigos dependientes.
    parameters: []
  /pse/v11:
    post:
      summary: getTransactionInformation
      operationId: post-PSEGetTransaccionInformation
      responses:
        '200':
          description: '**TransactionInformation**. Información del estado de la transacción.'
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <getTransactionInformation xmlns="https://placetopay.com/soap/pse">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <transactionID xmlns="">1503290218</transactionID>
                          </getTransactionInformation>
                      </Body>
                  </Envelope>
        description: |-
          Obtiene la información de una transacción, debe ser consultado para cualquier operación previamente creada con el método createTransaction o `createTransactionMultiCredit` ya sea cuando regresa del banco o cuando al menos han transcurrido 7 minutos desde que el cliente fue redirigido a la interfaz del banco. Deberá consumirse en intervalos de al menos cada 12 minutos hasta que tenga un estado de transacción diferente a `PENDING`.

          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación |
          | transactionID | int | Identificador único de la transacción en Placetopay, equivale al retornado en la creación de la transacción. |
      tags:
        - Servicio PSE
      description: |-
        Una vez el cliente ha finalizado la transacción en la interfaz del banco, el banco redirige al cliente a la URL especificada al crear la transacción, en este punto de entrada a su aplicativo, usted deberá consumir el servicio `getTransactionInformation` que le permite determinar el estado de la transacción. Solo si la transacción tiene como estado OK es porque la transacción fue autorizada, si por el contrario obtiene un estado **PENDING** es porque aún no tiene respuesta final del banco acerca de la transacción.

        Ya sea que el cliente retorne al punto de reingreso y que la transacción esté pendiente, o que haya abandonado la operación y haya roto el flujo normal, se deberá consumir el servicio `getTransactionInformation` para todas las operaciones que desde que fue invocado el `createTransaction` llevan más de 7 minutos sin un estado final de operación
    parameters: []
  pse/v11/:
    post:
      summary: CreateTransaccion
      operationId: post-pse-v11
      responses:
        '200':
          description: '**PSETransactionResponse**. Respuesta de la creación de la transacción, tenga en cuenta que la URL del banco se entrega solo si la propiedad returnCode es `SUCCESS`.'
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <createTransaction xmlns="https://placetopay.com/soap/pse">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <transaction xmlns="">
                                  <bankCode>1022</bankCode>
                                  <bankInterface>0</bankInterface>
                                  <returnURL>https://www.google.com/</returnURL>
                                  <reference>123456</reference>
                                  <description>Pago prueba</description>
                                  <language>ES</language>
                                  <currency>COP</currency>
                                  <totalAmount>1000</totalAmount>
                                  <taxAmount>0</taxAmount>
                                  <devolutionBase>0</devolutionBase>
                                  <tipAmount>0</tipAmount>
                                  <payer>
                                      <documentType>CC</documentType>
                                      <document>1037390241</document>
                                      <firstName>Juan</firstName>
                                      <lastName>Chavarria</lastName>
                                      <emailAddress>juanchavarria@gmail.com</emailAddress>
                                      <address></address>
                                      <city>Medellin</city>
                                      <province>Antioquia</province>
                                      <country>Colombia</country>
                                      <phone>3106785678</phone>
                                      <mobile>3106785678</mobile>
                                      <postalCode></postalCode>
                                  </payer>
                                  <buyer>
                                      <documentType>CC</documentType>
                                      <document>1037390241</document>
                                      <firstName>Juan</firstName>
                                      <lastName>Chavarria</lastName>
                                      <emailAddress>juanchavarria@gmail.com</emailAddress>
                                      <address></address>
                                      <city>Medellin</city>
                                      <province>Antioquia</province>
                                      <country>Colombia</country>
                                      <phone>3106785678</phone>
                                      <mobile>3106785678</mobile>
                                      <postalCode></postalCode>
                                  </buyer>
                                  <ipAddress>191.95.158.135</ipAddress>
                                  <userAgent>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.104 Safari/537.36</userAgent>
                              </transaction>
                          </createTransaction>
                      </Body>
                  </Envelope>
        description: |
          Solicita la creación de una transacción. En los datos de la solicitud se especifica quién es el pagador, el comprador y el despacho. Así mismo para cuál de los bancos habilitados se hace la petición y a que URL de retorno debe el banco redirigir al cuentahabiente.

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación | 
          | transaction | PSETransactionRequest | Datos de la solicitud |

          **PSETransactionRequest**

          Estructura que representa una solicitud de transacción con débitos a cuenta PSE.

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | bankCode | string[4] | Código de la entidad financiera con la cual realizar la transacción. |
          | bankInterface | string[1] | Tipo de interfaz del banco a desplegar `0 = PERSONAS, 1 = EMPRESAS]` |
          | returnURL | string[255] | URL de retorno especificada para la entidad financiera. |
          | reference | string[32] | Referencia única de pago. |
          | description | description | Descripción del pago. |
          | language | string[2] | Idioma esperado para las transacciones acorde a **ISO 631-1**, mayúscula sostenida.|
          | currency | string[3] | Moneda a usar para el recaudo acorde a **ISO 4217**. |
          | totalAmount | double | Valor total a recaudar. |
          | taxAmount | double | Discriminación del impuesto aplicado. |
          | devolutionBase | double | Base de devolución para el impuesto. |
          | tipAmount | double | Propina u otros valores exentos de impuesto (tasa aeroportuaria) y que deben agregarse al valor total a pagar. |
          | payer | Person | Información del pagador. |
          | buyer | Person | Información del comprador. |
          | shipping | Person | Información del receptor. |
          | ipAddress | string[15] | Dirección IP desde la cual realiza la transacción el pagador. |
          | userAgent | string[255] | Agente de navegación utilizado por el pagador. | 
          | additionalData | Attribute[] | Datos adicionales para ser almacenados con la transacción. |


          Person

          Estructura para reflejar la información de una persona involucrada en una orden de pago.

          **ATRIBUTOS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | document | string[12] | Número de identificación de la persona. |
          | documentType | string[3] | Tipo de documento de identificación de la persona. CC = Cédula de ciudadanía colombiana CE = Cédula de extranjería TI = Tarjeta de identidad PPN = Pasaporte NIT = Número de identificación tributaria SSN = Social Security Number |
          | lastName | string[60] | Apellidos |
          | company | string[60] | Nombre de la compañía en la cual labora o representa. |
          | emailAddress | string[80] | Correo electrónico. |
          | address | string[100] | Dirección postal completa. |
          | city | string[50] | Nombre de la ciudad coincidente con la dirección. |
          | province | string[50] | Nombre de la provincia o departamento coincidente con la dirección. |
          | country | string[2] | Código internacional del país que aplica a la dirección física acorde a **ISO 3166-1**, mayúscula sostenida. |
          | phone | string[30] | Número de telefonía fija. |
          | mobile | string[30] | Número de telefonía móvil o celular. |
      tags:
        - Servicio PSE
      description: |-
        Una vez se poseen los datos del pagador y/o comprador, así como la información de qué banco y qué tipo de interfaz debe mostrar el banco deberá entonces consumir el servicio de `createTransaction` para obtener la URL a la cual deberá redirigir al cliente para finalizar la transacción.

        Debe tener en cuenta que en los datos solicitados para crear la transacción se requiere la dirección IP desde la cual el cliente está realizando la transacción, así como la información del agente de navegación usado. Si lo desea, también puede proveer datos adicionales con la transacción, los cuales le permitirán tener esta información disponible en la consola de consulta de transacciones de Placetopay.

        Si la respuesta del servicio es SUCCESS, entonces deberá almacenar la información retornada en su base de datos, de vital importancia el `transactionId` pues es con este identificador que podrá consultar el estado final de la transacción.

        Tenga en cuenta que una respuesta SUCCESS en este punto sólo implica que la transacción ha sido aprovisionada por el banco y está en espera que el cliente llegue a la interfaz del banco, se autentique y autorice la operación iniciada.

        Al crear la transacción, esta puede fallar; algunos motivos incluyen montos por fuera del rango permitido, no disponibilidad del banco, problemas de configuración de la cuenta recaudadora, entre otros. Utilice la propiedad `responseReasonText` para obtener el mensaje de por qué falló la creación de la transacción. Algunos códigos no relacionados con el pagador pueden indicarle que genere una alerta sobre problemas con la disponibilidad del servicio, particularmente los relacionados con mala configuración.

        Una vez ha almacenado la información en su base de datos y ha confirmado que es exitosa la petición, se redirigirá al cliente a la URL del banco. Tenga en cuenta que la redirección a la interfaz del banco no debe realizarse en un frame o cualquier otro mecanismo que oculte la URL en la cual el cliente ingresará sus datos de autenticación.
    parameters: []
  placetopay/v11/:
    post:
      summary: getTransactionInformation
      operationId: post-placetopay-v11
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <getTransactionInformation xmlns="https://placetopay.com/soap/placetopay/">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <transactionID xmlns="">1503452477</transactionID>
                          </getTransactionInformation>
                      </Body>
                  </Envelope>
        description: ''
      description: |-
        Para aquellas transacciones que presentan una falla en los tiempos de respuesta, o que no puede ser verificado el `x_md5_hash`, se deberá consumir un Webservice para obtener de primera mano la información de la transacción.

        En los casos que la transacción tiene respuesta pendiente, la regla general es que debe consumirse el servicio cada 12 minutos para las operaciones que tengan al menos 7 minutos de antigüedad. Esto implica que debe existir un proceso automático solicitando al webservice las operaciones que llevan más de 7 minutos pendientes y que el barrido debe hacerse cada 12 minutos.

        `Tenga en cuenta que en el proceso de certificación, se hará revisión de los consumos de sonda para que concuerden con los tiempos definidos.`

         `El metodo de autenticación para el webservice de sonda se mantiene.`
    parameters: []
  /placetopay/v11/:
    parameters: []
    post:
      summary: queryTransaction
      operationId: post-placetopay-v11
      responses:
        '200':
          description: '**Transaction[]**. Transacciones que concuerdan con la solicitud.'
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <queryTransaction xmlns="https://placetopay.com/soap/placetopay/">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <request xmlns="">
                                  <reference>7544</reference>
                                  <currency>COP</currency>
                                  <totalAmount>1.000,00</totalAmount>
                                  <requestDate>2021-02-05</requestDate>
                              </request>
                          </queryTransaction>
                      </Body>
                  </Envelope>
        description: |-
          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación. |
          | request | QueryRequest | Parámetros para buscar la transacción. |

          **QueryRequest**

          Estructura para solicitar la búsqueda de una transacción.

          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | reference | String[32] | Número de referencia, orden de compra o factura relacionada. (`x_invoice_num usado`). |
          | currency | String[3] | Moneda utilizada en la solicitud acorde a **ISO 4217**.|
          | totalAmount | double | Valor total de la operación, si es de aerolinea con TA debe ser la suma del valor del tiquete, la tasa aeroportuaria y la tarifa administrativa. |
          | requestDate | requestDate | Fecha de solicitud o creación de la transacción acorde a **ISO 8601**, se obvia la hora de la solicitud
      description: |-
        Consulta el estado de una transacción acorde a los parámetros usados, tenga en cuenta que la respuesta es un arreglo de transacciones.

        URL del servicio: 

        Pruebas: https://test.placetopay.com/soap/placetopay/v11/ 

        Producción: https://api.placetopay.com/soap/placetopay/v11/
  tuya/v11/:
    post:
      summary: getTransactionInformation
      operationId: post-soap-tuya-v11
      responses:
        '200':
          description: '**TransactionInformation**. Información del estado de la transacción.'
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <getTransactionInformation xmlns="https://placetopay.com/soap/tuya">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-06T00:56:56+01:00</seed>
                              </auth>
                              <transactionID xmlns="">1503525790</transactionID>
                          </getTransactionInformation>
                      </Body>
                  </Envelope>
        description: |-
          Obtiene la información de una transacción, debe ser consultado para cualquier operación previamente creada con el método createTransaction ya sea cuando regresa del medio de pago o cuando al menos han transcurrido 7 minutos desde que el cliente fue redirigido a la interfaz del medio de pago. Deberá consumirse en intervalos de al menos cada 12 minutos hasta que tenga un estado de transacción `transactionState` diferente a `PENDING`.

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación |
          | transactionID | int | Identificador único de la transacción en Placetopay, equivale al retornado en la creación de la transacción. |
      tags:
        - Servicio Tuya
      description: |-
        Una vez el cliente ha finalizado la transacción en la interfaz del banco, el banco redirige al cliente a la URL especificada al crear la transacción, en este punto de entrada a su aplicativo, usted deberá consumir el servicio `getTransactionInformation` que le permite determinar el estado de la transacción. Solo si la transacción tiene como estado `OK` es porque la transacción fue autorizada, si por el contrario obtiene un estado `PENDING` es porque aún no tiene respuesta final del banco acerca de la transacción.

        Ya sea que el cliente retorne al punto de reingreso y que la transacción esté pendiente, o que haya abandonado la operación y haya roto el flujo normal, se deberá consumir el servicio `getTransactionInformation` para todas las operaciones que desde que fue invocado el `createTransaction` llevan más de 7 minutos sin un estado final de operación.
    parameters: []
  tuya/v11:
    post:
      summary: createTransaction
      operationId: post-soap-tuya-v11
      responses:
        '200':
          description: |
            **TuyaTransactionResponse**. Respuesta de la creación de la transacción, tenga en cuenta que la URL del medio de pago se entrega solo si la propiedad returnCode es `SUCCESS`.
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <createTransaction xmlns="https://placetopay.com/soap/tuya">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>c4864567c1d5595012af42d0f5aa1d4153151762</tranKey>
                                  <seed>2021-02-06T22:24:38+01:00</seed>
                              </auth>
                              <transaction xmlns="">
                                  <franchise>TY_EX</franchise>
                                  <returnURL>https://www.google.com/</returnURL>
                                  <reference>123</reference>
                                  <description>prueba</description>
                                  <language>ES</language>
                                  <currency>COP</currency>
                                  <totalAmount>1000</totalAmount>
                                  <taxAmount>0</taxAmount>
                                  <devolutionBase>0</devolutionBase>
                                  <tipAmount>0</tipAmount>
                                  <payer>
                                      <documentType>CC</documentType>
                                      <document>3456324567</document>
                                      <firstName>Jhon</firstName>
                                      <lastName>Doe</lastName>
                                      <emailAddress>ejemplo@correo.com</emailAddress>
                                      <address>cra 56 34-67</address>
                                      <city>Medellin</city>
                                      <province>Antioquia</province>
                                      <country>Colombia</country>
                                      <phone>3107865</phone>
                                      <mobile>3107865768</mobile>
                                  </payer>
                                  <buyer>
                                      <documentType>CC</documentType>
                                      <document>3456324567</document>
                                      <firstName>Jhon</firstName>
                                      <lastName>Doe</lastName>
                                      <emailAddress>ejemplo@correo.com</emailAddress>
                                      <address>cra 56 34-67</address>
                                      <city>Medellin</city>
                                      <province>Antioquia</province>
                                      <country>Colombia</country>
                                      <phone>3107865</phone>
                                      <mobile>3107865768</mobile>
                                  </buyer>
                                  <ipAddress>192.168.1.34</ipAddress>
                                  <userAgent>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Safari/537.36</userAgent>
                              </transaction>
                          </createTransaction>
                      </Body>
                  </Envelope>
        description: "Solicita la creación de una transacción. En los datos de la solicitud se especifica quien es el pagador, el comprador y el despacho. Así mismo para cuál de los medios de pago habilitados se hace la petición y a que URL de retorno debe el medio de pago redirigir al tarjeta habiente.\n\n**PARÁMETROS**\n\n\n| Nombre | Tipo | Descripción |\n|-----------|------|-------------|\n| auth | Authentication | Datos de autenticación. |\n| transaction | TuyaTransactionRequest | Datos de la solicitud. |\n\n**TuyaTransactionRequest**\n\nEstructura que representa una solicitud de transacción con tarjetas expedidas por TUYA.\n\n**ATRIBUTOS**\n\n| Nombre | Tipo | Descripción |\n|-----------|------|-------------|\n| franchise | string[4] | Código del medio de pago `TY_EX = Tarjeta Éxito, TY_AK = Tarjeta Alkosto` |\n| returnURL | string[255] | URL de retorno especificada para la entidad financiera. |\n| reference | string[32] | Referencia única de pago. |\n| description | \tstring[255] | Descripción del pago. |\n| language | string[2] | Idioma esperado para las transacciones acorde a **ISO 631-1**, mayúscula sostenida.|\n| currency | string[3] | Moneda a usar para el recaudo acorde a **ISO 4217**. |\n| totalAmount | double | Valor total a recaudar. |\n| taxAmount | double | Discriminación del impuesto aplicado. |\n| devolutionBase | double | Base de devolución para el impuesto. |\n| tipAmount | double | Propina u otros valores exentos de impuesto (tasa aeroportuaria) y que deben agregarse al valor total a pagar. |\n| payer | Person | Información del pagador. |\n| buyer | Person | Información del comprador. |\n| shipping | Person | Información del receptor. |\n| ipAddress | string[15] | Dirección IP desde la cual realiza la transacción el pagador. |\n| userAgent | string[255] | Agente de navegación utilizado por el pagador. |\n| additionalData | Attribute[] | Datos adicionales para ser almacenados con la transacción. |\n\n\nPerson\n\nEstructura para reflejar la información de una persona involucrada en una orden de pago.\n\n**ATRIBUTOS**\n\n| Nombre | Tipo | Descripción |\n|-----------|------|-------------|\n| document | string[12] | Número de identificación de la persona. |\n| documentType | string[3] | Tipo de documento de identificación de la persona. CC = Cédula de ciudadanía colombiana CE = Cédula de extranjería TI = Tarjeta de identidad PPN = Pasaporte NIT = Número de identificación tributaria SSN = Social Security Number |\n| lastName | string[60] | Apellidos |\n| company | string[60] | Nombre de la compañía en la cual labora o representa. |\n| emailAddress | string[80] | Correo electrónico. |\n| address | string[100] | Dirección postal completa. |\n| city | string[50] | Nombre de la ciudad coincidente con la dirección. |\n| province | string[50] | Nombre de la provincia o departamento coincidente con la dirección. |\n| country | string[2] | Código internacional del país que aplica a la dirección física acorde a **ISO 3166-1**, mayúscula sostenida. |\n| phone | string[30] | Número de telefonía fija. |\n| mobile | string[30] | Número de telefonía móvil o celular. |\n"
      tags:
        - Servicio Tuya
      description: |-
        Una vez ya se tengan los datos del pagador y comprador, así como la información de qué medio de pago usará, deberá entonces consumir el servicio de createTransaction para obtener la URL a la cual deberá redirigir al cliente para finalizar la transacción.

        Debe tener en cuenta que en los datos solicitados para crear la transacción se requiere la dirección IP desde la cual el cliente estará realizando la transacción, así como la información del agente de navegación usado. Si lo desea, también puede proveer datos adicionales con la transacción, los cuales le permitirán tener esta información disponible en la consola de consulta de transacciones de Placetopay. Tenga en cuenta que el documento del pagador es el documento del dueño de la tarjeta y que no podrá ser modificado posteriormente en la interfaz de TUYA para ese medio de pago.

        Si la respuesta del servicio es `SUCCESS`, entonces deberá almacenar la información retornada en su base de datos, de vital importancia el `transactionID` pues es con este identificador que podrá consultar el estado final de la transacción.

        Tenga en cuenta que una respuesta `SUCCESS` en este punto sólo implica que la transacción ha sido aprovisionada por TUYA y está en espera que el cliente llegue a la interfaz del medio de pago, se autentique y autorice la operación iniciada.

        Al crear la transacción, esta puede fallar; algunos motivos incluyen montos por fuera del rango permitido, no disponibilidad del medio de pago, problemas de configuración de la cuenta recaudadora, entre otros. Utilice el parametro `responseReasonText` para obtener el mensaje de por qué falló la creación de la transacción. Algunos códigos no relacionados con el pagador pueden indicarle que genere una alerta sobre problemas con la disponibilidad del servicio, particularmente los relacionados con mala configuración.

        Una vez ha almacenado la información en su base de datos y ha confirmado que es exitosa la petición, se redirigirá al cliente a la URL del medio de pago. Tenga en cuenta que la redirección a la interfaz del medio de pago no debe realizarse en un frame o cualquier otro mecanismo que oculte la URL en la cual el cliente ingresará sus datos de autenticación.
    parameters: []
  cashorder/:
    post:
      summary: addOrder
      operationId: post-cashorder
      responses:
        '200':
          description: '**int**. La referencia única de la orden de pago en Placetopay.'
      requestBody:
        content:
          application/xop+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <addOrder xmlns="https://www.placetopay.com/soap/cashorder/">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <order xmlns="">
                                  <reference>123456</reference>
                                  <description>123</description>
                                  <language>ES</language>
                                  <currency>COP</currency>
                                  <totalAmount>1000</totalAmount>
                                  <taxAmount>0</taxAmount>
                                  <subtotalAmount>0</subtotalAmount>
                                  <expiration>2021-02-08T17:47:59-05:00</expiration>
                                  <buyer>
                                      <documentType>CC</documentType>
                                      <document>1037678567</document>
                                      <firstName>Jhon</firstName>
                                      <lastName>Doe</lastName>
                                      <emailAddress>ejemplo@correo.com</emailAddress>
                                      <address>cra 45 67-78</address>
                                      <city>Medellin</city>
                                      <province>Antioquia</province>
                                      <phone>3105675689</phone>
                                      <mobile>3105675689</mobile>
                                  </buyer>
                                  <ipAddress>192.168.2.34</ipAddress>
                                  <userAgent>Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.146 Safari/537.36</userAgent>
                                  <notificationURL>https://www.google.com/</notificationURL>
                              </order>
                          </addOrder>
                      </Body>
                  </Envelope>
        description: |-
          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | datos de autenticación. |
          | order | CashOrder | datos de la orden de pago. |

          **CashOrder**

          Estructura con la información de una orden de pago en efectivo.

          **ATRIBUTOS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | reference | string[32] | Referencia única de pago. |
          | description | string[255] | Descripción o detalle de la orden de pago. |
          | language | string[2] | Idioma esperado para las transacciones acorde a **ISO 631-1**, usar ES. |
          | currency | string[3] | Código de la moneda acorde a ISO 4217 en la cual está expresado el cobro, usar COP. |
          | totalAmount | decimal | Valor total a recaudar. |
          | taxAmount | decimal | Discriminación del impuesto aplicado. |
          | subtotalAmount | decimal | Valor base antes de impuestos. |
          | expiration | datetime | Fecha y hora máxima hasta la cual se recibe el pago [AAAA-MM-DDTHH:NN:SS] | 
          | buyer | Person | Información del comprador. |
          | ipAddress| string | Dirección IP desde la cual realiza la solicitud el pagador. |
          | userAgent | string | Agente de navegación utilizado por el pagador al hacer la solicitud. |
          | additionalData | Attribute[] | Datos adicionales para ser almacenados con la transacción. |
          | notificationURL | string[255] | URL de notificación una vez la transacción es realizada. |
      tags:
        - Servicio Efectivo
      description: Agrega una orden de pago para efectivo.
    parameters: []
  /cashorder/:
    post:
      summary: getOrder
      operationId: post-cashorder
      responses:
        '200':
          description: '**CashOrderInfo**. Información de la orden, si la orden no existe el estado de la orden será NOT_FOUND, si hay un error al consultar el registro se retornará una excepción SoapFault.'
      description: Obtiene la información de una orden de pago en efectivo para conocer su estado.
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <getOrder xmlns="https://www.placetopay.com/soap/cashorder/">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <id xmlns="">306133</id>
                          </getOrder>
                      </Body>
                  </Envelope>
        description: |-
          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación. |
          | id | int | Referencia única de la orden de pago a consultar. |
      tags:
        - Servicio Efectivo
    parameters: []
  /cashorder:
    post:
      summary: deleteOrder
      operationId: post-cashorder
      responses:
        '200':
          description: '**int**. Número de registros eliminados, si es un cero indicará que el registro no fue hallado, si hay un error al eliminar el registro se retornará una excepción `SoapFault`.'
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <deleteOrder xmlns="https://www.placetopay.com/soap/cashorder/">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                              <id xmlns="">306133</id>
                          </deleteOrder>
                      </Body>
                  </Envelope>
        description: |
          **PARÁMETROS**

          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación. |
          | id | int | Referencia única de la orden de pago a eliminar. |
      description: Elimina una orden de pago en Placetopay que no haya sido pagada.
      tags:
        - Servicio Efectivo
  cashorder:
    post:
      summary: getOrderPDF
      operationId: post-cashorder
      responses:
        '200':
          description: 'base64Binary. PDF generado codificado como base64, si hay un error al generar el PDF se retornará una excepción `SoapFault`.'
      description: 'Genera el PDF para el pago en efectivo en la red de corresponsales que actualmente se permita. Para la fecha de este documento esta red involucra a corresponsales del grupo AVAL/ATH, Baloto, Efecty, cajas de Almacenes Éxito, Carulla, Surtimax y Súper Inter. Así como cajeros electrónicos del grupo AVAL. Próximamente la red de oficinas de Bancolombia.'
      requestBody:
        content:
          application/soap+xml:
            schema:
              type: object
              properties: {}
            examples:
              Ejemplo:
                value: |-
                  <Envelope xmlns="http://schemas.xmlsoap.org/soap/envelope/">
                      <Body>
                          <getOrderPDF xmlns="https://www.placetopay.com/soap/cashorder/">
                              <auth xmlns="">
                                  <login>6a95d841f363dc91faa1e5d2f4d437c5</login>
                                  <tranKey>d211a0fd5490252d0cbad1c84a2e5c3fa9e42d38</tranKey>
                                  <seed>2021-02-02T00:56:56+01:00</seed>
                              </auth>
                  <id xmlns="">306133</id>
                          </getOrderPDF>
                      </Body>
                  </Envelope>
        description: |-
          | Nombre | Tipo | Descripción |
          |-----------|------|-------------|
          | auth | Authentication | Datos de autenticación. |
          | id | int | Referencia única de la orden de pago generada. |
      tags:
        - Servicio Efectivo
    parameters: []
  '':
    post:
      summary: Get AuthAPI Colombia
      operationId: post-xml-auth.php
      responses:
        '200':
          description: OK
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                login:
                  type: string
                trankey:
                  type: string
            examples:
              Example Autenthication:
                value:
                  login: 6dd490faf9cb87a9862245da41170ff2
                  trankey: 024h1IlD
        description: ''
      tags:
        - Autenticación
      description: "\n**PARAMETROS**\n\n| Parametro | Descripción |\n|-----------|-------------|\n| login\t| Identificador del sitio.|\n| tranKey |llave transaccional, que está formada por la siguiente operación: SHA1(seed + secretkey). |\n| seed |Fecha actual, la cual se genera en formato ISO 8601.|\n\n\n`El login y el secretKey son suministrados por PlacetoPay`\n\n`Esta estructura debe de ser enviada en cada petición realizada al servicio`\n\n `El seed no puede tener diferencia de más de 5 minutos.`\n\nEn la parte derecha puede simular la generacion de la aute\nnticación requerida para cada una de las solicitudes que se realicen a la pasarela de pagos (API), dicho método recibe un login y un trankey por médio de una solicitud POST, internamente se realiza el procesamiento de la información para retornar una structura XML que puede ser copiada y pegada en las demás solicitudes dentro del objeto auth.\n\nCabe aclarar que éste método se provee cómo una ayuda para generar la estructura de autenticación de las solicitudes y no hace parte de los método de integración de webcheckout\n\nurl referencia autenticación: https://authe-ptp.herokuapp.com/xml-auth.php"
    parameters: []
components:
  schemas: {}
tags:
  - name: Servicio PSE
  - name: Servicio Tarjeta credito
  - name: Servicio Tuya
  - name: Servicio Efectivo
